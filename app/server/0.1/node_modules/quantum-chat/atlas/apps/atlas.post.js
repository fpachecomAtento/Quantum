var colors = require('colors');
var mongoose = require('mongoose');
var apps = mongoose.model('apps');

module.exports = function(req, res){
	

	var newApp = new apps({
			user : req.body.user,
			company : req.body.company,
			versionApp : req.body.versionApp,
			theme : req.body.theme,
			title : req.body.title,
			logo : {
				logoType : req.body.logoType,
				logSrc : req.body.logSrc
			},
			messages : {
				welcome : req.body.messageWelcome,
				wait : req.body.messageWait
			},
			crm : req.body.crm
		});

		newApp.save(function(err, resToPost) {
			if(err){
				colors.red(err.message);
				return res.status(200).jsonp({
					error : 500,
					name : err.name,
					message : err.errors
				});
			}
			console.log(colors.inverse.green('>> Nueva App '+resToPost._id+' <<'));
			res.status(200).jsonp(resToPost);
		});


}
