var colors = require('colors');
var mongoose = require('mongoose');
var crmField = mongoose.model('crmField');

module.exports = function(req, res){
	

	var newCrmField = new crmField({
			crm : req.body.crm,
			name : req.body.name,
			type : req.body.type,
			label : req.body.label,
			labelError : req.body.labelError,
			placeHolder : req.body.placeHolder,
			require : req.body.require,
			length : {
				lengthMax : req.body.lengthMax,
				lengthMin : req.body.lengthMin
			},
			both : req.body.both
		});

		newCrmField.save(function(err, resToPost) {
			if(err){
				colors.red(err.message);
				return res.status(200).jsonp({
					error : 500,
					name : err.name,
					message : err.errors
				});
			}
			console.log(colors.inverse.green('>> Nuevo un nuevo field '+resToPost._id+' <<'));
			res.status(200).jsonp(resToPost);
		});


}
